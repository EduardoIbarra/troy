<!--
  Generated template for the FallidaPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar>
    <ion-title>Visita Fallida</ion-title>
  </ion-navbar>

</ion-header>


<ion-content padding>
  <div class="center">
    <h3>Fecha: {{today | date:'d/M/yyyy'}}</h3>
  </div>

  <ion-grid>
    <h5>Datos del Usuario</h5>
    <ion-row>
      <ion-col>
        <ion-list>
          <ion-item>
            <ion-label color="primary" floating># de Medidor</ion-label>
            <ion-input [(ngModel)]="fallida.medidor" type="text" (keyup.enter)="searchMedidor()"></ion-input>
            <button clear item-right ion-button (click)="searchMedidor()">
              Buscar
            </button>
          </ion-item>
          <ion-item>
            <ion-label color="primary" floating>RPU</ion-label>
            <ion-input [(ngModel)]="fallida.rpu" type="text"></ion-input>
          </ion-item>
          <ion-item>
            <ion-label color="primary" floating>Nombre</ion-label>
            <ion-input [(ngModel)]="fallida.nombre" type="text"></ion-input>
          </ion-item>
        </ion-list>
      </ion-col>
      <ion-col>
        <ion-list>
          <ion-item>
            <ion-label color="primary" floating>Calle</ion-label>
            <ion-input [(ngModel)]="fallida.calle" type="text"></ion-input>
          </ion-item>
          <ion-item>
            <ion-label color="primary" floating>Colonia</ion-label>
            <ion-input [(ngModel)]="fallida.colonia" type="text"></ion-input>
          </ion-item>
          <ion-item>
            <ion-label color="primary" floating>Ciudad</ion-label>
            <ion-input [(ngModel)]="fallida.ciudad" type="text"></ion-input>
          </ion-item>
        </ion-list>
      </ion-col>
    </ion-row>
    <ion-item>
      <ion-label color="primary" floating>Observaciones</ion-label>
      <ion-textarea [(ngModel)]="fallida.observaciones"></ion-textarea>
    </ion-item>
  </ion-grid>

  <ion-grid>
    <signature-pad *ngIf="!showing" [options]="signaturePadOptions"  id="signatureCanvas"></signature-pad>
    <ion-grid *ngIf="!showing">
      <ion-row>
        <ion-col col-4>
          <button ion-button full color="primary" (click)="firmaContratista()">Firma Contratista</button>
        </ion-col>
        <ion-col col-4>
          <button ion-button full color="light" (click)="drawClear()">Limpiar</button>
        </ion-col>
        <ion-col col-4>
          <button ion-button full color="primary" (click)="firmaCFE()">Firma CFE</button>
        </ion-col>
      </ion-row>
    </ion-grid>
    <ion-grid>
      <ion-row>
        <ion-col>
          <div class="signatureContainer center" *ngIf="fallida.firmaContratista">
            <img [src]="fallida.firmaContratista">
            <br />
            <b>Supervisor Contratista</b>
          </div>
        </ion-col>
        <ion-col>
          <div class="signatureContainer center" *ngIf="fallida.firmaCFE">
            <img [src]="fallida.firmaCFE">
            <br />
            <b>Supervisor CFE</b>
          </div>
        </ion-col>
      </ion-row>
    </ion-grid>
  </ion-grid>
  <hr />
  <button *ngIf="!showing" full color="primary" ion-button (click)="save()">Enviar</button>
</ion-content>
